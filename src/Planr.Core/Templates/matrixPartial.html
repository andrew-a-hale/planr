<style>{{ Css }}</style>

<div class="impact-effort-chart">
  <!-- Chart Title -->
  <h1>{{ Config.Title }}</h1>

  <div class="impact-effort-container" style="--container-max-width: {{ Config.ContainerMaxWidthCss }};">
    <div class="grid-lines">
        <div class="grid-line-h" style="top: 33.333%;"></div>
        <div class="grid-line-h" style="top: 66.667%;"></div>
        <div class="grid-line-v" style="left: 33.333%;"></div>
        <div class="grid-line-v" style="left: 66.667%;"></div>
    </div>
    
    {{ for task in ViewModel.Tasks }}
    <div class="task-point hover-effect" 
         style="--task-color: {{ task.CategoryColor }}; left: {{ task.LeftPercent }}%; top: {{ task.TopPercent }}%;"
         title="{{ task.Name }} ({{ task.Category }})">
        {{ task.Ref }}
    </div>
    {{ end }}
    
    <!-- Axis Labels -->
    <!-- X-axis labels (Effort) - positioned just inside grid lines -->
    <div class="axis-label" style="left: 33.33%; top: 100%; transform: translate(-100%, -100%);">Low</div>
    <div class="axis-label" style="left: 66.66%; top: 100%; transform: translate(-100%, -100%);">Medium</div>
    <div class="axis-label" style="left: 100%; top: 100%; transform: translate(-100%, -100%);">High</div>
    
    <!-- Y-axis labels (Impact) - positioned just inside grid lines -->
    <div class="axis-label" style="top: 0%;">High</div>
    <div class="axis-label" style="top: 33.33%;">Medium</div>
    <div class="axis-label" style="top: 66.66%;">Low</div>
    
    <!-- Axis Titles - positioned outside the grid -->
    <div class="axis-title" style="left: 50%; top: 100%; transform: translateX(-50%);">Effort</div>
    <div class="axis-title" style="top: 50%; transform: rotate(-90deg) translate(25%, -200%);">Impact</div>
  </div>
</div>

<!-- References Table -->
<div class="references-table">
    <h3>Task References</h3>
    <table>
        <thead>
            <tr>
                <th>Reference</th>
                <th>Name</th>
                <th>Category</th>
                <th>Impact</th>
                <th>Effort</th>
            </tr>
        </thead>
        <tbody>
            {{ for task in ViewModel.Tasks }}
            <tr>
                <td><span class="reference-badge" style="background: {{ task.CategoryColor }};">{{ task.Ref | string.upcase }}</span></td>
                <td>{{ task.Name }}</td>
                <td><span class="category-badge" style="background: {{ task.CategoryColor }};">{{ task.Category }}</span></td>
                <td>{{ task.Impact }}</td>
                <td>{{ task.Effort }}</td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>
